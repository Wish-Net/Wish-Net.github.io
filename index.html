<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Supabase Auth Demo</title>
  <script src="https://unpkg.com/@supabase/supabase-js@2"></script>

  <style>
    body { font-family: Arial; background: #111; color: #fff; padding: 40px; }
    input { display:block; margin:10px 0; padding:8px; width:250px; }
    button { padding:10px 20px; }
    #dashboard { margin-top:30px; display:none; }
  </style>
</head>
<body>

  <h2>Login / Sign Up</h2>

  <input id="email" type="email" placeholder="Email">
  <input id="password" type="password" placeholder="Password">

  <button id="loginBtn">Login</button>
  <button id="signupBtn">Sign Up</button>

  <div id="dashboard">
    <h3>Dashboard</h3>
    <p id="userEmail"></p>
    <button id="logoutBtn">Logout</button>
  </div>

  <script>
    // -------------------------------
    // Supabase client
    // -------------------------------
    const supabase = supabase.createClient(
      "https://nppwibcwohfzvxxvtnzb.supabase.co",
      "YOUR_PUBLIC_ANON_KEY_HERE",
      {
        auth: {
          persistSession: true,
          autoRefreshToken: true,
          detectSessionInUrl: true
        }
      }
    );

    const emailEl = document.getElementById("email");
    const passwordEl = document.getElementById("password");
    const loginBtn = document.getElementById("loginBtn");
    const signupBtn = document.getElementById("signupBtn");
    const logoutBtn = document.getElementById("logoutBtn");
    const dashboard = document.getElementById("dashboard");
    const userEmailText = document.getElementById("userEmail");

    // -----------------------------------------------------------
    // Restore session on page load
    // -----------------------------------------------------------
    async function restoreSession() {
      const { data: { session } } = await supabase.auth.getSession();

      if (!session) {
        dashboard.style.display = "none";
        return;
      }

      userEmailText.textContent = "Logged in as: " + session.user.email;
      dashboard.style.display = "block";
    }

    restoreSession();

    // -----------------------------------------------------------
    // LOGIN
    // -----------------------------------------------------------
    loginBtn.onclick = async () => {
      const email = emailEl.value;
      const password = passwordEl.value;

      const { data, error } = await supabase.auth.signInWithPassword({
        email,
        password
      });

      if (error) {
        alert(error.message);
        return;
      }

      userEmailText.textContent = "Logged in as: " + data.user.email;
      dashboard.style.display = "block";
    };

    // -----------------------------------------------------------
    // SIGN UP
    // -----------------------------------------------------------
    signupBtn.onclick = async () => {
      const email = emailEl.value;
      const password = passwordEl.value;

      const { data, error } = await supabase.auth.signUp({
        email,
        password
      });

      if (error) {
        alert(error.message);
        return;
      }

      alert("Signup successful. Check your email for confirmation.");
    };

    // -----------------------------------------------------------
    // LOGOUT
    // -----------------------------------------------------------
    logoutBtn.onclick = async () => {
      await supabase.auth.signOut();
      dashboard.style.display = "none";
      emailEl.value = "";
      passwordEl.value = "";
    };

  </script>

</body>
</html>
